# ----------------------------
# TvWallauShop - Caption Pipeline
# ----------------------------
DEBUG=1
LOG_LEVEL=info

# ----------------------------
# Internet-Regel
# ----------------------------
# Das Service darf ins Internet NUR zum Holen der Produktbilder (HTTP URLs).
# Für HuggingFace/Model-Downloads steuert NUR das hier:
#
# Einmalig (Model downloaden + OpenVINO Export erzeugen):
#   HF_HUB_OFFLINE=0
#   TRANSFORMERS_OFFLINE=0
#
# Danach (normaler Betrieb, kein Model-Download mehr):
HF_HUB_OFFLINE=0
TRANSFORMERS_OFFLINE=0

# ----------------------------
# Captioning (OpenVINO-first)
# ----------------------------
# Empfehlung: BLIP liefert i.d.R. deutlich bessere Produkt-Captions als vit-gpt2
CAPTION_MODEL_NAME=Salesforce/blip-image-captioning-base
CAPTION_BACKEND=auto

# Akku-freundlich: erst NPU, dann GPU, dann CPU
OPENVINO_DEVICE=AUTO:NPU,GPU,CPU

# Optional: Prompt-Steuerung (für BLIP sinnvoll)
CAPTION_USE_DECODER_PROMPT=1
CAPTION_PROMPT_PREFIX=a product photo of

# Optional: Ausgabe-Qualität
CAPTION_NUM_BEAMS=4
CAPTION_MAX_NEW_TOKENS=24
CAPTION_NO_REPEAT_NGRAM_SIZE=3
CAPTION_REPETITION_PENALTY=1.2

# ----------------------------
# Captioning - Sicherheit / Limits
# ----------------------------
CAPTION_HTTP_USER_AGENT=TvWallauShop-AI/1.0
CAPTION_ALLOWED_SCHEMES=http,https
CAPTION_ALLOW_LOCAL_FILES=0
CAPTION_ALLOW_PRIVATE_NETWORKS=0
CAPTION_MAX_IMAGE_BYTES=8388608
CAPTION_MAX_IMAGE_PIXELS=20000000
CAPTION_MAX_IMAGES=4

# ----------------------------
# OpenVINO Export / Cache
# ----------------------------
CAPTION_OPENVINO_ALLOW_EXPORT=1
CAPTION_OPENVINO_FORCE_EXPORT=0
CAPTION_OPENVINO_DIR=
OPENVINO_CACHE_DIR=

# ----------------------------
# Backend Service (.env)
# ----------------------------
NODE_ENV=development
PORT=3000
APP_ORIGIN=http://localhost:3001
APP_URL=http://localhost:3000
ENABLE_ROUTE_LOGS=true
DEBUG_ROUTES=false

# Database / MariaDB (Backend + Docker Compose)
DB_HOST=127.0.0.1
DB_PORT=3306
DB_USER=tvwallau
DB_PASS=tvwallau_pw
DB_PASSWORD=tvwallau_pw
DB_NAME=tvwallau
DB_ROOT_PASS=tvwallau_root_pw

# Auth / JWT
JWT_SECRET=change_me_access_secret
JWT_REFRESH_SECRET=change_me_refresh_secret
ACCESS_TOKEN_EXPIRES_IN=15m
REFRESH_TOKEN_EXPIRES_IN=30d
REFRESH_COOKIE_MAX_AGE_MS=604800000

# Mailer
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=mailuser
SMTP_PASS=mailpass
SMTP_FROM=shop@example.com
EMAIL_SEND=true

# AI Services (Backend -> Python AI)
AI_PY_SERVICE_URL=http://localhost:8000
AI_PY_TIMEOUT_MS=8000
AI_PRODUCT_AI_USE_REAL_SERVICE=true

# ----------------------------
# Frontend (.env / Vite)
# ----------------------------
VITE_API_ORIGIN=http://localhost:3000
VITE_API_BASE_URL=http://localhost:3000/api/v1
VITE_API_WS_URL=http://localhost:3000
